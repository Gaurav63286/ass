<!DOCTYPE html>
<html>
<head>
    <title>Full Code Display</title>
    <style>
        body {
            font-family: Consolas, monospace;
            padding: 20px;
        }
        textarea {
            width: 100%;
            height: 600px;
            font-size: 14px;
        }
    </style>
</head>
<body>
<textarea readonly>
#define true 1
#define false 0
#include<ctype.h>
#include<stdio.h>

int avail[4],work[10];
int max[5][4];
int alloc[5][4];
int need[5][4],finish[10],req[10];
int safeseq[10],ssi=-1;
int m=3;
int n=5;
int i,j;

void get_alloc_state();
void print_safess();
void get_alloc_request();
void main()
{
get_alloc_state();
}
void get_alloc_state()
{
printf("\n Total number of resource type: %d",m);
printf("\n Total number of processes: %d",n);
int choice = 0;
while(choice != 8) 
{
printf("\n1. Accept available\n2. Display allocation and max\n3. Display the contents of need matrix\n4. Display available\n5.Accept request for a process\n6. Safety algorithm\n7. Resources request algorithm\n8. Exit\nEnter choice : ");
scanf("%d", &choice);
switch(choice) {
case 1 :
printf("\n Enter available:");
for(j=0;j<m;j++)
{
scanf("%d", &avail[j]);
}
printf("\n Enter maximun demand by each proces\n");

for(i=0;i<n;i++)
{
printf("Process %d: ",i);
for(j=0;j<m;j++)
scanf("%d",&max[i][j]);
}
printf("\n\n Enter allocation by each process\n");
for(i=0;i<n;i++)

{
printf("Process %d: ",i);
for(j=0;j<m;j++)
scanf("%d",&alloc[i][j]);
}
break;
case 2 :
printf("\n Maximum demand by each process\n");
for(i=0;i<n;i++)
{
printf("Process %d: ",i);
for(j=0;j<m;j++)
printf("%d\t",max[i][j]);
printf("\n");
}
printf("\n\n Allocation by each process\n");
for(i=0;i<n;i++)
{
printf("Process %d: ",i);
for(j=0;j<m;j++)
printf("%d\t",alloc[i][j]);
printf("\n");
}
break;
case 3 :
printf("\n\n Need by each process\n");
for(i=0;i<n; i++)
{
printf("Process %d: ",i);
for(j=0;j<m;j++)
{
need[i][j]=max[i][j]-alloc[i][j];
printf("%4d",need[i][j]);
}
printf("\n");
}
break;
case 4 :
printf("\nAvailable: ");
for(j=0; j<m;j++)
{
printf("%d\t",avail[j]);
}
break;
case 5 :
printf("\n\nRequest of Process number ? ");
scanf("%d", &i);
printf("\n Enter Request : ");
for(j=0; j<m; j++)

scanf ("%d",&req[j]);
break;
case 7 :
if(safe_state()) {
printf("\n Given system is in safe state...");

ssi = ssi / 2;
print_safess();
} else {
printf("\n Given system is not in safe state...");

get_alloc_request();
ssi=-1;
if(safe_state())
{
printf("\n system will be in safe state after request...");

print_safess();
}
else
{
printf("\n System will not be in safe state after request...");

printf("\n Allocation state is undone... ");

printf("\n Process requesting should wait ...");

}
}
break;
case 6 :
if(safe_state()) {
printf("\n Given system is in safe state...");
print_safess();
}
break;
case 8 :
choice = 8;
break;
default :
printf("Enter valid choice!");

}
}
}
safe_state() // safety algo
{
int found;
for(j=0; j<m; j++)
work[j]=avail[j];
for(i=0; i<n; i++)

finish[i]=false;
printf("\n\n Check of safe state...");
do
{
found=false;
for(i=0;i<n;i++)
{
if(finish[i]==false &&need_lte_work(i))
{
printf("\n Selected process %d",i);
finish[i]=true;
for (j=0;j<m;j++)
work[j]=work[j]+alloc[i][j];
safeseq[++ssi]=i;
found=true;
}
}
if(found==false)
{
for(i=0;i<n;i++)
if(finish[i]==false) return(false);
return(true);
}
}while(1);
}
need_lte_work(int i)
{
for(j=0; j<m; j++)
{
if(need[i][j]>work[j])
return(false);
}
return(true);
}
void print_safess()
{
printf("\n\n Safe sequence : ");
for(i=0; i <= ssi; i++)
printf("%4d ", safeseq[i]);

}
void get_alloc_request() // resource request algo
{

if(!req_lte_need(i))
{
printf("\n Process requested more than its max claim..");
}
if(!req_lte_avail(i))
{
printf("\n Resources are not available.Process %d should wait..",i);
}
for(j=0;j<m; j++)

{
alloc[i][j]+=req[j];
need[i][j]-=req[j];
avail[j]-=req[j];
}
}
req_lte_need(int i)
{
for(j=0; j<m; j++)
{
if (req[j] >need[i][j])
return 0;
}
return 1;
}
req_lte_avail()
{
for(j=0; j<m; j++)
{
if(req[j]>avail[j])
return 0;
}
return 1;
}

 //java

    import java.sql.*;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;

class SETAQ1 extends JFrame implements ActionListener
{
	JLabel l1,l2,l3,l4;
	JTextField t1,t2,t3,t4;
	JButton b1,b2,b3;
	String sql;
	JPanel p,p1;
	Connection con;
	JTable t;
	JScrollPane js;
	Statement stmt;
	PreparedStatement ps;
	ResultSet rs;
	ResultSetMetaData rsmd;
	int columns;
	Vector columnNames =new Vector();
	Vector data=new Vector();

	SETAQ1()//throws Exception
	{
	
		l1=new JLabel("ENTER PID::");
		l2=new JLabel("ENTER PNAME::");
		l3=new JLabel("ENTER PDESC::");
		l4=new JLabel("ENTER PSTATUS::");

		t1=new JTextField(20);
		t2=new JTextField(20);
		t3=new JTextField(20);
		t4=new JTextField(20);
		
		b1=new JButton("INSERT");
		b2=new JButton("DISPLAY");
		b3=new JButton("RESET");
		b1.addActionListener(this);
		b2.addActionListener(this);
		b3.addActionListener(this);
		p1=new JPanel();
		p=new JPanel();
		p.add(l1);	p.add(t1);
		p.add(l2);	p.add(t2);
		p.add(l3);	p.add(t3);
		p.add(l4);	p.add(t4);
		
		
		p.add(b1);
		p.add(b2);
		p.add(b3);
		add(p);
		setLayout(new GridLayout(2,2));
		setVisible(true);
		setSize(300,600);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
			
	}
	public void actionPerformed(ActionEvent e)
	{
		if(e.getSource()==(JButton)b1)
		{
			int pid=Integer.parseInt(t1.getText());
			String pname=t2.getText();
			String pdesc=t3.getText();
			String pstatus=t4.getText();
			System.out.println("Value is geted");
			try
			{
			  Class.forName("org.postgresql.Driver");
		     con=DriverManager.getConnection("jdbc:postgresql://server2/ty250","ty250","ty250");
			sql="insert into project values(?,?,?,?)";
			ps=con.prepareStatement(sql);
			ps.setInt(1,pid);
			ps.setString(2,pname);
			ps.setString(3,pdesc);
			ps.setString(4,pstatus);
			int n=ps.executeUpdate();
			if(n!=0)
				JOptionPane.showMessageDialog(null,"Record is inserted...");
			else
				JOptionPane.showMessageDialog(null,"Record is not inserted...");
			}

			catch(Exception ex)
			{
				System.out.println("\t"+ex);
			}
		}
		else
		if(e.getSource()==(JButton)b2)
		{	
			try
			{
				Class.forName("org.postgresql.Driver");
				con=DriverManager.getConnection("jdbc:postgresql://server2/ty250","ty250","ty250");
				stmt=con.createStatement();				
				rs=stmt.executeQuery("Select * from project");
				rsmd=rs.getMetaData();	
				columns=rsmd.getColumnCount();
				System.out.println("columns");
				for(int i=1;i<=columns;i++)
				{
							  columnNames.addElement(rsmd.getColumnName(i));
				}
				while(rs.next())
				{
					Vector row=new Vector(columns);
					for(int i=1;i<=columns;i++)
					{
						row.addElement(rs.getObject(i));	
					}
					data.addElement(row);
				}
				System.out.println("Before table");
				t=new JTable(data,columnNames);
				js=new JScrollPane(t);
				p1.add(js);
				add(p1);
				setSize(500,500);
				setVisible(true);
				setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
				
			}
			catch(Exception er)
			{
				System.out.println("rai\t"+er);
			}
		}
		else
		{
			t1.setText("");
			t2.setText("");
			t3.setText("");
			t4.setText("");	
		}
	}
	public static void main(String args[])//throws Exception
	{
		new SETAQ1();		
	}
}



    //Q2
    import java.sql.*;
import java.io.*;
import java.util.*;
import java.lang.*;
public class SETAQ2
{
	public static void main(String args[]) //throws Exception
	{
	try{
		Class.forName("org.postgresql.Driver");
		System.out.println("Loaded");
		Connection con=DriverManager.getConnection("jdbc:postgresql://server2/exam1","exam1","exam1");
		ResultSet rs;
		if(con!=null)
			System.out.println("Succesfull");
		else
			System.out.print("Unsuccesful");
		DatabaseMetaData db=con.getMetaData();
		System.out.println("Database product name:"+db.getDatabaseProductName());
		System.out.println("Database product name:"+db.getUserName());
		//System.out.println("Database product name:"+db.getMajorVersion());
		System.out.println("Database product name:"+db.getDriverVersion());
		rs=db.getTables(null,null,null, new String[] {"TABLE"});
		System.out.println("Database list table:");
		while(rs.next())
		{
			String tb=rs.getString("TABLE NAME");
			System.out.println("Table:"+tb);
		}
		con.close();
		}
catch(Exception e)
	{
		System.out.println(e);
	}
	}
}
    //Q3
    import java.util.*;
import java.sql.*;
public class SETAQ3
{
	public static void main(String args[])
	{
		try
		{
			Class.forName("org.postgresql.Driver");
			System.out.println("Loaded");
			Connection con=DriverManager.getConnection("jdbc:postgresql://server2/ty250","ty250","ty250");
			if(con!=null)
				System.out.println("Succesfull");
			else
				System.out.print("Unsuccesful");
			Statement stmt=con.createStatement();
			ResultSet rs=stmt.executeQuery("select * from donor");

			java.sql.ResultSetMetaData rsmd=rs.getMetaData();
			int column=rsmd.getColumnCount();
			for(int i=1;i<=column;i++)
			{
				System.out.println("Column no::"+i);
				System.out.println("Column name::"+rsmd.getColumnName(i));
				System.out.println("Column type::"+rsmd.getColumnTypeName(i));
				System.out.println("column size::"+rsmd.getColumnDisplaySize(i));
			}
		}
		catch(Exception ex)
		{}	
	}
}
</textarea>

</body>
</html>

